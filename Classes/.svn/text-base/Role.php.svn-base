<?php

class Role {

    /*
     * Property: teacher
     */
    private $teacher;

    /*
     * Property: secretary
     */
    private $secretary;

    // property: read
    
    public function __get($var){
        $whitelist = array("teacher","secretary");
        if(! in_array($var,$whitelist))  return;

        // integer or false
        return @$this->$var->roleid;
    }

    // property: write teacher/secretary id to database
    public function __set($var,$value){
        $whitelist = array("teacher","secretary");
        if(! in_array($var,$whitelist))  return;

        if(! $this->$var){
            $this->$var = new StdClass;
            $this->$var->rolename = $var;
        }
        $this->$var->roleid = $value;

        if(! $this->$var->id){
            $id = insert_record('elsa_cle', $this->$var);
            $this->$var->id = $id;
        }
        else {
            update_record('elsa_cle',$this->$var);
        }
    }
    
    public function __construct(){
        global $DB;
        // set object or false
        //var_dump($context);
        /*
        $this->secretary = $DB->get_record('elsa_cle', array('rolename'=>'secretary'));
        $this->teacher = $DB->get_record('elsa_cle', array('rolename'=>'teacher'));
        */
    }
    
}
